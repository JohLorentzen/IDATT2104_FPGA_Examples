# DotProduct example 

This project is an example on how you may use HDL in this case Verilog to configure a FPGA to complete a specific function, dot product in this example.

## Dependencies

Make sure the following dependencies are installed on your system:

1. **Verilog**: For writing the hardware description language code.
2. **Verilator**: To convert Verilog code to a cycle-accurate model in C++/SystemC.
3. **SystemC**: For the simulation of the SystemVerilog code.
4. **GTKWave**: For viewing waveforms generated by the testbench.

### Installation Instructions

Installation for mac is inspired by the following guide: 
[Guide](https://k0nze.dev/posts/verilog-apple-silicon/)

But the project requries the following as well as setting environment variables as follows: 

Make sure to change the Paths to your developer folders: 

```sh
# bison
export CFLAGS="-I/opt/bison/bison-3.7.91/share/include ${CFLAGS}"
export CXXFLAGS="-I/opt/bison/bison-3.7.91/share/include ${CXXFLAGS}"
export LDFLAGS="-L/opt/bison/bison-3.7.91/lib ${LDFLAGS}"
export PATH="/opt/bison/bison-3.7.91/bin:${PATH}"

# flex
export CFLAGS="-I/opt/flex/flex-2.6.4/include ${CFLAGS}"
export CXXFLAGS="-I/opt/flex/flex-2.6.4/include ${CXXFLAGS}"
export LDFLAGS="-L/opt/flex/flex-2.6.4/lib ${LDFLAGS}"
export PATH="/opt/flex/flex-2.6.4/bin:${PATH}"

# systemc
export SYSTEMC_HOME="${PATH TO YOUR DEVELOPER FOLDER}/system-c.2.3.3"

# verilator
export VERILATOR_ROOT="${PATH TO YOUR DEVELOPER FOLDER}/verilator-v4.224"
export PATH="$VERILATOR_ROOT/bin:$PATH"
export VERILATOR_INC_DIR="$VERILATOR_ROOT/include"
```


### Verilator 

Follow the instructions on the [Verilator website](https://www.veripool.org/wiki/verilator).

#### SystemC

Follow the instructions on the [Accellera website](https://accellera.org/downloads/standards/systemc).

#### Bison Flex GTKWave 

Install Bison Flex and GTKWave using your package manager. For example, on Ubuntu:

```sh
sudo apt-get install gtkwave
```
or on mac with Homebrew [install homebrew](https://brew.sh/)

```sh
brew install randomplum/gtkwave/gtkwave 
```

## Building and Running the Testbench

1. **Create build directory and navigate into it**:
   ```sh
   mkdir build
   cd build
   ```

2. **Generate build files using CMake**:
   ```sh
   cmake -GNinja ..
   ```

3. **Build the project using Ninja**:
   ```sh
   ninja
   ```

4. **Run the testbench**:
   ```sh
   ./DotProduct_tb
   ```

5. **View the results in GTKWave**:
   ```sh
   gtkwave DotProduct_tb.vcd
   ```

## Notes

- Ensure the SystemC and Verilator libraries are correctly installed and linked.
- Adjust the simulation time (`sc_start(100, SC_NS);`) if necessary to ensure the computation completes.
---
